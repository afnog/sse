<h1>AfNOG 2014 Workshop on Network Technology</h1>

<h2>Track SS-E: Scalable Internet Services</h2>

<p>Jump within this page:</p>

<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#instructors">Instructors</a></li>
<li><a href="#timetable">Timetable</a></li>
<li><a href="#topics">Topics</a></li>
<li><a href="#management">Management</a></li>
</ul>

<p><a href="photos/Class_Group_Photo.jpg" class="group-photo"><img src="photos/Class_Group_Photo_600.jpg" alt="[SS-E Group Photo]"></a></p>

<h2>Introduction</h2>

<p>This course on Scalable Internet Services is part of the <a href="http://www.ws.afnog.org/afnog2014">AfNOG 2014 Workshop on Network Technology</a>, held in conjunction with the <a href="http://www.afnog.org/">AfNOG meeting</a>
in Djibouti, May-June 2014.</p>

<p>We use hands-on training in a well-equipped classroom over a five-day period to teach skills required for the configuration and operation of large scale Internet services.</p>

<h3>Who should attend</h3>

<p>Technical staff who are now providing Internet Services, or those who will be involved in the establishment and/or provisioning of a basic national Internet Services in the country.</p>

<h3>Prerequisites</h3>

<p>Experience using and administering *NIX Servers, Name Servers, Web Servers and Mail Servers.</p>

<h3>Instructors</h3>



<table class="instructors">
    <thead><tr>
<th>Name</th>
<th>Initials</th>
<th>From</th>
</tr></thead>
    <tbody>
        <tr id="JA"> <td>Joe Abley</td>      <td>JA</td> <td>Canada</td> </tr>
        <tr id="KC"> <td>Kevin Chege</td>    <td>KC</td> <td>Kenya</td> </tr>
        <tr id="LM"> <td>Laban Mwangi</td> <td>LM</td> <td>Kenya?</td> </tr>
        <tr id="EN"> <td>Evelyn Namara</td>  <td>EN</td> <td>Uganda</td> </tr>
        <tr id="CW"> <td>Chris Wilson</td>   <td>CW</td> <td>UK</td> </tr>
    </tbody>
</table>

<h3>Participants</h3>



<table class="participants">
    <thead><tr>
<th>Name</th>
<th>Country</th>
</tr></thead>
    <tbody>
        <tr>
<td>Frank Kwetei Quaynor</td>
<td>Ghana</td>
</tr>
    </tbody>
</table>

<h3>Timetable</h3>

<table class="timetable" width="80%">
    <colgroup>
        <col width="10%">
        <col width="10%">
        <col width="10%">
        <col width="10%">
        <col width="10%">
        <col width="10%">
    </colgroup>
    <thead>
        <tr>
            <th></th>
            <th>Monday</th>
            <th>Tuesday</th>
            <th>Wednesday</th>
            <th>Thursday</th>
            <th>Friday</th>
        </tr>
        <tr>
            <td></td>
            <td>26/05</td>
            <td>27/05</td>
            <td>28/05</td>
            <td>29/05</td>
            <td>30/05</td>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td class="time">
                09:30-11:00
            </td>
            <td class="mon">
                <a href="#introduction">SSE Intro/ee bootcamp</a>
            </td>
            <td class="tue">
                <a href="#dns">DNS</a>
            </td>
            <td class="wed">
                <a href="#dns">DNS</a>
            </td>
            <td class="thu">
                <a href="#exim">Exim</a>
            </td>
            <td class="fri">
                <a href="#mail">POP/IMAP</a>
            </td>
        </tr>
        <tr class="break">
            <td></td>
            <td colspan="5">Tea Break</td>
        </tr>
        <tr>
            <td class="time">
                11:30-13:30
            </td>
            <td class="mon">
                <a href="#apache">Apache</a>
            </td>
            <td class="tue">
                <a href="#security-and-availability">Security and Availability</a>
            </td>
            <td class="wed">
                <a href="#dns">DNS</a>
            </td>
            <td class="thu">
                <a href="#exim">Exim</a>
            </td>
            <td class="fri">
                <a href="#radius">RADIUS</a>
            </td>
        </tr>
        <tr class="break">
            <td></td>
            <td colspan="5">Lunch</td>
        </tr>
        <tr>
            <td class="time">
                14:30-16:30
            </td>
            <td class="mon">
                <a href="#security">Nagios</a>
            </td>
            <td class="tue">
                <a href="#virtualization">Virtualization</a><br>
                <a href="#loadbalancing">Load Balancing</a>
            </td>
            <td class="wed">
                <a href="#apache">Apache</a>
            </td>
            <td class="thu">
                <a href="#exim">Exim</a>
            </td>
            <td class="fri">
                <a href="#monitoring">Monitoring IP Services</a>
            </td>
        </tr>
        <tr class="break">
            <td></td>
            <td colspan="5">Tea Break</td>
        </tr>
        <tr>
            <td class="time">
                17:00-19:00
            </td>
            <td class="mon">
                <a href="#apache">Apache</a>
            </td>
            <td class="tue">
                <a href="#virtualization">Virtualization</a><br>
                <a href="#loadbalancing">Load Balancing</a>
            </td>
            <td class="wed">
                <a href="#apache">Apache</a>
            </td>
            <td class="thu">
                <a href="#dnssec">DNSSEC</a>
            </td>
            <td class="fri">
                <a href="#securityavailability">Security &amp; Availability</a><br>
                <a href="#closingsurvey">Closing Survey</a>
            </td>
        </tr>
        <tr class="break">
            <td></td>
            <td colspan="5">Dinner</td>
        </tr>
        <tr>
            <td class="time">
                Evening Sessions (20:00-22:00)
            </td>
            <td colspan="3">Closed</td>
            <td class="thu">Closed</td>
            <td class="fri">Closed</td>
        </tr>
    </tbody>
</table>

<h2>Topics</h2>

<h3>Introduction</h3>

<h4><a href="#CW">Chris Wilson</a></h4>

<h6><a href="http://afnog.github.io/sse/intro/presentation">Presentation</a></h6>

<h6><a href="https://www.surveymonkey.com/s/7Q88MH7">Opening Survey</a></h6>

<h6><a href="http://afnog.github.io/sse/intro/opening-survey-results.pdf">Survey Results</a></h6>

<h3>Apache</h3>

<h4><a href="#EN">Evelyn Namara</a></h4>

<h6>Apache Presentation/PowerPoint</h6>

<h6><a href="http://afnog.github.io/sse/apache/apache_sse_exercises_apache+ssl.txt">Exercise1 - Apache Installation/SSL</a></h6>

<h6><a href="http://afnog.github.io/sse/apache/apache_sse_exercises_Mysql%20&amp;%20PHP%20configs.txt">Exercise2 - MySQL/PHP/Wordpress Install</a></h6>

<h6><a href="http://afnog.github.io/sse/apache/apache_sse_exercises_wordpress.txt">Exercise3 - Wordpress Configuration</a></h6>

<ul>
<li>Installing Apache22 from FreeBSD ports</li>
<li>Configure Apache with basic configuration </li>
<li>Start Apache http daemon and connect to local box</li>
<li>Verify local ssl certificate works </li>
<li>Configuring Apache with SSL </li>
<li>Example SSL Apache configuration file </li>
<li>Sample config for Virtual Hosting</li>
<li>Install MySQL, PHP, Wordpress </li>
<li>Configuring Wordpress</li>
</ul>

<h3>DNS</h3>

<h4><a href="#JA">Joe Abley</a></h4>

<h5>Fundamentals</h5>

<h6><a href="dns/dns1-presentation.ppt">PowerPoint</a></h6>

<h6><a href="dns/dns1-presentation.pdf">PDF</a></h6>

<h6><a href="dns/dns1-exercise.txt">Exercise</a></h6>

<p>Goal: to understand overall purpose and structure of DNS</p>

<ul>
<li>IP addresses vs. names</li>
<li>DNS as a distributed, hierarchical database</li>
<li>Domain names and resource records:

<ul>
<li>A, PTR, MX, CNAME, TXT, SOA/NS</li>
</ul>
</li>
<li>Domain name lookup responses</li>
<li>Reverse DNS</li>
<li>DNS as client-server model

<ul>
<li>Resolver</li>
<li>Cache</li>
<li>Authoritative server</li>
</ul>
</li>
<li>Testing DNS (dig)</li>
<li>Understanding output from dig </li>
<li>Practical Exercises:

<ul>
<li>Configure Unix resolver</li>
<li>Use dig { A, other (e.g. MX), non-existent answer, reverse lookup }</li>
<li>Use tcpdump to show queries being sent to cache</li>
</ul>
</li>
</ul>

<h5>DNS Caching and Debugging</h5>

<h6><a href="dns/dns2-presentation.ppt">PowerPoint</a></h6>

<h6><a href="dns/dns2-presentation.pdf">PDF</a></h6>

<h6><a href="dns/dns2-exercise1.txt">Exercise 1</a></h6>

<h6><a href="dns/dns2-exercise2.txt">Exercise 2</a></h6>

<h6><a href="dns/dns2-exercise3.txt">Exercise 3</a></h6>

<p>Goal: to understand operation of a recursive nameserver</p>

<ul>
<li>Recap of previous session</li>
<li>DNS as a distributed database.</li>
<li>Resource record NS: referral of answer</li>
<li>Caching nameserver and root servers</li>
<li>Caching used to reduce load (esp. top level servers)</li>
<li>Issue of stale data in caches (problems with distributed systems).

<ul>
<li>TTL records on each record</li>
<li>Negative TTL in SOA</li>
</ul>
</li>
<li>Recursion and caching (dig +norec)</li>
<li>Demo: <a href="http://www.ticscali.co.uk">www.ticscali.co.uk</a>
</li>
<li>Practical Exercise:

<ul>
<li>Debugging DNS Worksheet (with dig +norec ):
. Students work on their own examples</li>
</ul>
</li>
<li>Configuring a caching nameserver 

<ul>
<li>check /var/named/etc/namedb/named.conf</li>
<li>run tcpdump</li>
<li>rndc start</li>
<li>change /etc/resolv.conf to point to your nameserver</li>
<li>query two times - { Look at 'aa' flag, TTL, query time }</li>
<li>rndc flush</li>
<li>cache is authoritative for 127.0.0.1</li>
</ul>
</li>
<li>What sort of hardware would you choosing when building a DNS cache?<br>
</li>
<li>Improving the configuration of a cache NS </li>
<li>Managing a caching nameserver </li>
<li>Practical Exercise:

<ul>
<li>Building your own cache nameserver</li>
<li>Improving the configuration of the cache NS</li>
</ul>
</li>
<li>Question and Answer session</li>
<li>Summary</li>
</ul>

<h5>Configuring Authoritative Name Servers</h5>

<h6><a href="dns/dns3-presentation.ppt">PowerPoint</a></h6>

<h6><a href="dns/dns3-presentation.pdf">PDF</a></h6>

<p>Goal: to properly configure an authoritative nameserver </p>

<ul>
<li>Recap of caching NS<br>
</li>
<li>DNS Replication </li>
<li>Outside world cannot tell the difference between master and slave </li>
<li>When does replication take place? </li>
<li>Two (2) Dangers with serial numbers </li>
<li>Configuration of Master &amp; Slave NS 

<ul>
<li>Format of Resource Records { SOA and NS } </li>
</ul>
</li>
<li>Ten (10) Common DNS Operational and Configuration Errors (RFC1912) </li>
</ul>

<h5>Exercises</h5>

<h6><a href="dns/dns3-exercise.txt">Exercise</a></h6>

<p>Setting up authoritative name services for a domain</p>

<ul>
<li>Master &amp; Slave nameserver exercises </li>
</ul>

<h5>Delegation and Reverse DNS</h5>

<h6><a href="dns/dns4-presentation.ppt">PowerPoint</a></h6>

<h6><a href="dns/dns4-presentation.pdf">PDF</a></h6>

<ul>
<li>How do you delegate a subdomain?</li>
<li>Glue records</li>
<li>Reverse DNS

<ul>
<li>Subnets smaller than /24</li>
</ul>
</li>
<li>DNS Landmarks

<ul>
<li>Key organisations and people</li>
</ul>
</li>
<li>The Root Zone</li>
<li>Top-Level Domains

<ul>
<li>Generic and Country Code TLDs</li>
</ul>
</li>
<li>Registries, Registrars, Registrants</li>
<li>Nameserver Vendors</li>
<li>Conferences, Industry Groups</li>
<li>Mailing Lists</li>
<li>DNS Summary</li>
<li>Further reading</li>
</ul>

<h3>DNSSEC</h3>

<h4><a href="#JA">Joe Abley</a></h4>

<h6><a href="dns/DNSSEC_High-Level_Awareness.pdf">Presentation/PDF</a></h6>

<h6><a href="dns/DNSSEC_High-Level_Awareness.key">Presentation/Keynote</a></h6>

<h6><a href="dns/dns5-exercise.txt">Exercise/Text</a></h6>

<p>DNSSEC High Level Awareness</p>

<h3>RADIUS</h3>

<h4><a href="#CW">Chris Wilson</a></h4>

<h6><a href="radius/radius.odp">Presentation/OpenOffice</a></h6>

<h6><a href="radius/radius.pdf">Presentation/PDF</a></h6>

<h3>Virtualization</h3>

<h4>
<a href="#JJ">Joel Jaeggli</a> and <a href="#CW">Chris Wilson</a>
</h4>

<h6>Virtualization Overview (<a href="virtualisation/sse-virtualization-overview-2013.pdf">PDF</a>/<a href="virtualisation/sse-virtualization-overview-2013.odp">OpenOffice</a>)</h6>

<h6>Virtualization Exercise (<a href="virtualisation/virt-exer-2013.pdf">PDF</a>/<a href="virtualisation/virt-exer-2013.odp">OpenOffice</a>)</h6>

<h6>Virtualization with KVM (<a href="virtualisation/afnog_2013_virtualization_kvm_cw_130610.pdf">PDF</a>/<a href="virtualisation/afnog_2013_virtualization_kvm_cw.odp">OpenOffice</a>)</h6>

<h3>Load Balancing</h3>

<h4><a href="#JJ">Joel Jaeggli</a></h4>

<h6><a href="loadbalancing/sse-LB-overview.pdf">Presentation/PDF</a></h6>

<h6><a href="loadbalancing/sse-LB-overview.odp">Presentation/OpenOffice</a></h6>

<h6><a href="loadbalancing/ha-proxy-install.txt">Exercise</a></h6>

<h3>Monitoring</h3>

<h4><a href="#KC">Kevin Chege</a></h4>

<h6><a href="nagios/nagios.pdf">Monitoring IP Services</a></h6>

<h6><a href="monitoring/nagios-exercise1.txt">Nagios Exercise-1</a></h6>

<h6><a href="monitoring/nagios-exercise2.txt">Nagios Exercise-2</a></h6>

<h6><a href="monitoring/smokeping-exercise1.txt">Smokeping Exercise</a></h6>

<h3>Exim</h3>

<h4><a href="#CW">Chris Wilson</a></h4>

<h6><a href="exim/afnog_2013_exim_presentation_130613.pdf">Presentation/PDF</a></h6>

<h6><a href="exim/afnog_2013_exim_presentation.odp">Presentation/OpenOffice</a></h6>

<h6><a href="exim/eicar">EICAR Anti-Virus Test File</a></h6>

<h6><a href="exim/spam.txt">Sample spam message</a></h6>

<h3>Mail</h3>

<h4><a href="#MM">Michuki Mwangi</a></h4>

<h5>Introduction to POP and IMAP</h5>

<h6><a href="mail/dovecot-intro.pdf">Presentation and Exercise/PDF</a></h6>

<h6><a href="mail/dovecot-intro.ppt">Presentation and Exercise/PowerPoint</a></h6>

<ul>
<li>Dovecot - Server for POP and IMAP

<ul>
<li>What is Dovecot?</li>
<li>Installing dovecot from ports</li>
<li>Configuring Dovecot</li>
<li>Configuring POP3s and IMAPs</li>
</ul>
</li>
</ul>

<h6><a href="mail/dovecot-scaling.pdf">Presentation and Exercise/PDF</a></h6>

<h6><a href="mail/dovecot-scaling.ppt">Presentation and Exercise/PowerPoint</a></h6>

<h6><a href="mail/dovecot-mysql-schema.sql">Dovecot Basic Mysql Schema</a></h6>

<ul>
<li>Dovecot - Virtual Users

<ul>
<li>Configuring Dovecot for Virtual users with Mysql</li>
<li>Configuring Exim for Virtual Users </li>
</ul>
</li>
</ul>

<h5>Webmail using Squirrelmail</h5>

<h6><a href="mail/squirrelmail.pdf">Presentation/PDF</a></h6>

<h6><a href="mail/squirrelmail.ppt">Presentation/PowerPoint</a></h6>

<ul>
<li>Squirrelmail - Webmail IMAP

<ul>
<li>What is Squirrelmail</li>
<li>Installing Squirrelmail from ports/source</li>
<li>Configuring squirrelmail</li>
<li>Redirecting http to https</li>
</ul>
</li>
</ul>

<h5>Scaling mail services</h5>

<h6><a href="mail/clustering.htm">Mail Server Clustering</a></h6>

<h6><a href="mail/scalability.htm">Mail Server Scalability</a></h6>

<ul>
<li>Mailserver scalability

<ul>
<li>Linear password files </li>
<li>Linear mbox files </li>
<li>Too many files in one directory </li>
<li>CPU limits </li>
<li>Disk performance </li>
<li>Keep your SMTP (smarthost) and POP3 services separate </li>
</ul>
</li>
<li>Notes and Clustering and NFS

<ul>
<li>Using Network File System (NFS)</li>
<li>Using Proxies </li>
<li>Load balancing </li>
<li>Database backends</li>
<li>FreeBSD NFS </li>
</ul>
</li>
</ul>

<h3>Security and Availability</h3>

<h4><a href="#JJ">Joel Jaeggli</a></h4>

<h6><a href="security/sse-sec-and-availability.pdf">Presentation/PDF</a></h6>

<h6><a href="security/sse-sec-and-availability.odp">Presentation/ODP</a></h6>

<h3>Closing Survey</h3>

<h4><a href="#JJ">Joel Jaeggli</a></h4>

<h6>
<a href="http://www.surveymonkey.com/s/7TD2J7T">Survey link</a> (online)</h6>

<h6>
<a href="survey/2013_exit_survey_results.pdf">Survey results</a> (PDF)</h6>

<h2>Management</h2>

<p>Details for project management of the training</p>

<h3>Editing this page</h3>

<p>Please <a href="https://github.com/afnog/sse/issues">file an issue</a> requesting to be added as an administrator of the <a href="https://github.com/afnog">AfNOG organisation on GitHub</a>.</p>

<h3>Mailing list</h3>

<p>The instructors group on Google Groups:</p>

<ul>
<li>Email address: <a href="mailto:afnog-sse@googlegroups.com">afnog-sse@googlegroups.com</a>
</li>
<li>Web interface: <a href="https://groups.google.com/forum/#!forum/afnog-sse">https://groups.google.com/forum/#!forum/afnog-sse</a>
</li>
</ul>

<h3>Topics and Instructors</h3>

<ul>
<li>Welcome - CW?</li>
<li>DNS - JA?</li>
<li>RADIUS - CW</li>
<li>Apache - EN</li>
<li>Virtualization - LM</li>
<li>Load Balancing - LM</li>
<li>Monitoring - KC</li>
<li>Exim - CW</li>
<li>Mail (Dovecot, Webmail, scalability) - KC</li>
<li>Security and Availability - CW</li>
<li>Closing Survey - CW</li>
</ul>

<p>See the <a href="https://github.com/afnog/sse/wiki/Operating-System-Choices">wiki page</a>.</p>

<h3>Coordinating the lab-setup</h3>

<p>Who is arriving when?</p>

<ul>
<li>CW on 22/05 around 14h</li>
<li>EN on 24/05 </li>
<li>KC on 25/05 early morning</li>
<li>JA on 25/05 at 0900</li>
</ul>

<h3>Administration</h3>

<p>All done by CW unless anyone else wants to.</p>

<ul>
<li>Student numbers and names</li>
<li>Classroom setup, networking, virtual machine images</li>
<li>Notices - door, timetable, complaints box, wifi password</li>
<li>Introductory talk - welcome, topic poll, complaints box</li>
<li>Time management during the workshop (breaks, lunch, etc)</li>
<li>Set alarms for break times</li>
<li>Ensuring that every topic has an instructor and enough time allocated</li>
<li>Ensuring that participants are receiving any assistance necessary</li>
<li>Student name verification for certificates</li>
<li>Coordinate the class group photo</li>
<li>Liaise with the secretariat on any other issues that may be required</li>
<li>Ensure that all course materials are placed on the workshop folder for CD burning at the end of the workshop</li>
<li>Ensure that the participants complete and return the feedback form</li>
<li>Download and serve any files needed, e.g. FreeBSD ISO images (for virtualisation) and packages (for pkg_add mirror)</li>
</ul>

<h4>TODO</h4>

<ul>
<li>Student numbers and names</li>
<li>Power strips: do we have enough? tape them down</li>
<li>Set up desktop/backup PCs</li>
<li>Distribute the Wifi password</li>
<li>Nagios config for all PCs</li>
<li>Phones to silent</li>
</ul>

<h3>Meta (about this site)</h3>

<p>Source code (Markdown):</p>

<ul>
<li>Latest master is in <a href="https://github.com/afnog/sse">GitHub</a>.</li>
<li>Clone an offline copy with Markdown source (no HTML) at <code>git@github.com:afnog/sse.git</code>.</li>
</ul>

<p>Generated HTML:</p>

<ul>
<li>Created with <a href="https://github.com/dreverri/gollum-site">gollum-site</a> from the source code.</li>
<li>Possibly outdated copy in <a href="https://github.com/afnog/afnog.github.io">GitHub</a>.</li>
<li>
<a href="http://afnog.github.io/sse/">Browsable online</a> at <a href="http://afnog.github.io/sse/">http://afnog.github.io/sse/</a>.</li>
<li>Clone an offline copy (HTML, not Markdown) at <code>git@github.com:afnog/afnog.github.io.git</code>.</li>
</ul>

<p>Generating the HTML:</p>

<pre><code>sudo gem install gollum-site
</code></pre>
