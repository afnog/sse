Mailwatch Debian

cd /home/afnog
wget https://github.com/mailwatch/MailWatch/archive/v1.2.2.zip
unzip v1.2.2.zip 
cd MailWatch-1.2.2
service mysql start
mysql < create.sql

mysql -u root -p

GRANT ALL ON mailscanner.* TO mailwatch@localhost IDENTIFIED BY 'mailwatch';
GRANT FILE ON *.* TO mailwatch@localhost IDENTIFIED BY 'mailwatch';
FLUSH PRIVILEGES;
quit

ln -s /home/afnog/MailWatch-1.2.2/MailScanner_perl_scripts/MailWatch.pm /usr/share/MailScanner/perl/custom/
ln -s /home/afnog/MailWatch-1.2.2/MailScanner_perl_scripts/SQLSpamSettings.pm /usr/share/MailScanner/perl/custom/
ln -s /home/afnog/MailWatch-1.2.2/MailScanner_perl_scripts/SQLBlackWhiteList.pm /usr/share/MailScanner/perl/custom/

mysql mailscanner -u mailwatch -p
INSERT INTO users SET username = 'admin', password = MD5('afnog'), fullname = 'Afnog', type = 'A';
exit;


cp -R /home/afnog/MailWatch-1.2.2/mailscanner /var/www/html/mailwatch

vi /etc/apache2/sites-available/mailwatch.conf

Alias /mailwatch  /var/www/html/mailwatch
    <Directory />
        # Apache 2.4
        Require all granted
        
        # Apache 2.2
        #Order allow,deny
        #Allow from all
    </Directory>

    AddType application/x-httpd-php .php
    DirectoryIndex index.php

service apache2 restart


###### EDIT POSTFIX
sudo sh -c "echo header_checks = regexp:/etc/postfix/header_checks >> /etc/postfix/main.cf"

